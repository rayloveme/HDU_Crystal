质量集中在中间 滤波一定要滤好

屏幕上显示两条线，锁定灯标位置

8701 电流环

买东西：ICM20602 赛道布 胶棒 电压表 铁架

只有TIM1/8 TIM2 TIM3 支持从模式 可以用作编码器输入

速度环 旋转一个轮子 另一个轮子跟着转 正反馈

模糊pid：模糊pid本质上就是一个动态pid。在这里，我是用的偏差，偏差的微分
作为反馈，根据这2个参数，调整pid 的值。
1、模糊化：输入，偏差、偏差的微分这2个量，根据它们的大小，得出一
个合理的模糊语句表示。假如我的偏差范围是1-100。根据你分的细致程度
（我这里分为3层），我把它拆分成3类：1-33（小），34-66（中），67-100（大）
，这一步称为“确定各输入量的模糊语言”。 好，这时候我计入输入进来的
偏差为33.从上面的分类上来看，它是属于小，这个时候不能这么理解。假
如33这个偏差有60%的人认为是小，40%的人认为是中。0%的人认为是大。我就
把60%称为偏差对于小的隶属度，40%称为偏差对于中的隶属度。至于这
个隶属度如何得来，便是通过根据经验得出的隶属度函数算出来的。隶属度函
数有多种，网上一查一大堆。
2、规则库的建立：规则库理论上就是关系式，只不过不像粗暴拟合那般让我
们无法“大展拳脚”地拟合。说一个最简单的吧，通过上的模糊化后，我得知输
入进来的偏差是小，偏差的微分是大，那么，我就让我的p增大，d不变。这
个时候，让p增大是一个p单独对应的规则库中得出的结果。同理，d也是。而这
个规则库，就是通过上面自己的理解建立的，建立成功后，我向这个库中输入  
  偏差的大小，偏差的微分的大小。然后出来 对应的pid。
3、模糊推理：根据规则库推理出对应结果。由于1那里是会解出多个不同隶属
度的模糊化结果，所以每个模糊化结果都送入规则库得出推理结果。例子：此
时偏差小：60%，偏差中：40%。偏差微分小：10%，偏差中：90%.那么 就能
根据模糊推理得到四种结果（有些结果可能是相同的），在根据隶属度算出对
应结果的比例。
4、解模糊：这个步骤和1步骤相反，首先根据3得到的不同模糊推理结果和对
应的比例，一般采用常用的三种方法之一（重心法，高度法，面积法），和输
出的规则库，来得到最终的输出。假如我算出p为输出大的比例是20%，中%50，小%30
，这时范模糊p的规则库的    大：p=2，中：p=1.5，小p=1。然后对应比例
相乘就得到p的结果。整个模糊pid控制结束。
